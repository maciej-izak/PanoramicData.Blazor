@page "/pdtree"
@using PanoramicData.Blazor.Web.Data

<h1>PDTree</h1>

<PDTree @ref="_tree" DataProvider="_dataProvider"
		TItem="FileSystemEntry" KeyField="x => x.Path" ParentKeyField="x => x.ParentPath" TextField="x => x.Name"
		ShowLines="_showLines" ShowRoot="_showRoot" AllowSelection="true"
		SelectionChange="SelectionChangeHandler" NodeExpanded="NodeExpandedHandler" NodeCollapsed="NodeCollapsedHandler" >
	<NodeTemplate>
		@if (context.Isleaf)
		{
			<i class="far fa-file"></i>
			<b>@context.Data?.Path</b>
		}
		else
		{
			<i class="far fa-folder"></i>
			<span>@context.Text</span>
		}
	</NodeTemplate>
</PDTree>

<hr />

<button class="btn btn-secondary" @onclick="() => _showLines = !_showLines">@(_showLines ? "Hide" : "Show") Lines</button>

<button class="btn btn-secondary" @onclick="() => _showRoot = !_showRoot">@(_showRoot ? "Hide" : "Show") Root</button>

<button class="btn btn-secondary" @onclick="() => _tree.ExpandAll()">Expand All</button>

<button class="btn btn-secondary" @onclick="() => _tree.CollapseAll()">Collapse All</button>

<button class="btn btn-secondary" @onclick="@(() => _tree.SelectItemAsync(@"C:\ProgramData\Acme\UserGuide.pdf"))">Select Item</button>

<br />

<div>
	<b>
		<span>Selected Item:</span>
	</b>
	<span>@_selectedEntry?.Path</span>
</div>

<div>
	<div class="form-group p-1">
		<label>Events</label>
		<textarea rows="8" class="form-control">@_events</textarea>
	</div>
</div>